<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telescope Control Panel</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/astronomy-engine/2.1.19/astronomy.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>üî≠ Telescope Control Panel</h1>
            <div class="controls-row">
                <button class="modern-btn" id="select-telescope">
                    üõ∞Ô∏è Select Telescope
                </button>
                <button class="modern-btn" id="select-field">
                    üåå Select Field
                </button>
                <button class="modern-btn" id="select-datetime">
                    üïê Date & Time
                </button>
                <div class="status-indicator">
                    <div class="status-dot" id="connection-status"></div>
                    <span>Connected</span>
                </div>
            </div>
            
            <!-- Info Display -->
            <div class="info-panel">
                <div id="telescope-info">No telescope selected</div>
                <div id="field-info">No field selected</div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Telescope Info Cards -->
            <div class="telescope-info">
                <div class="info-card">
                    <div class="info-label">Date</div>
                    <div class="info-value" id="local-date">----------</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Local Time</div>
                    <div class="info-value" id="local-time">--:--:--</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Sidereal Time</div>
                    <div class="info-value" id="sidereal-time">--:--:--</div>
                </div>
                <div class="info-card">
                    <div class="info-label">RA</div>
                    <div class="info-value" id="center-ra">--h --m --s</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Dec</div>
                    <div class="info-value" id="center-dec">¬±--¬∞ --‚Ä≤ --‚Ä≥</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Altitude</div>
                    <div class="info-value" id="altitude">--¬∞</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Azimuth</div>
                    <div class="info-value" id="azimuth">--¬∞</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Airmass</div>
                    <div class="info-value" id="airmass">--</div>
                </div>
            </div>

            <!-- Finder View -->
            <div class="finder-section">
                <canvas class="finder-canvas" id="finder-canvas" width="600" height="600"></canvas>
                
                <!-- Slew Controls -->
                <div class="slew-controls">
                    <button class="direction-btn" id="north-btn">‚¨ÜÔ∏è N</button>
                    <button class="speed-btn modern-btn" id="speed-btn">Slew: Medium</button>
                    <button class="direction-btn" id="west-btn">‚¨ÖÔ∏è W</button>
                    <button class="direction-btn" id="east-btn">‚û°Ô∏è E</button>
                    <button class="direction-btn" id="south-btn">‚¨áÔ∏è S</button>
                    <button class="abort-btn direction-btn" id="abort-btn">üõë Abort Slew</button>
                </div>
            </div>
        </main>

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Photometer Panel -->
            <div class="instrument-panel" id="photometer-section">
                <div class="panel-header">
                    <div class="panel-icon">üì∏</div>
                    <div class="panel-title">Photometer</div>
                    <div class="status-indicator" style="margin-left: auto;">
                        <div class="status-dot inactive" id="photometer-status"></div>
                        <span>Ready</span>
                    </div>
                </div>
                
                <canvas class="instrument-canvas" id="photometer-canvas" width="360" height="200"></canvas>
                
                <div class="aperture-info">
                    <div id="aperture-objects">No objects in aperture</div>
                </div>
                
                <div class="photometer-controls">
                    <div class="filter-controls">
                        <button class="filter-btn" data-filter="U">U</button>
                        <button class="filter-btn active" data-filter="B">B</button>
                        <button class="filter-btn active" data-filter="V">V</button>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <button class="modern-btn" id="aperture-btn">Aperture: 20"</button>
                        <button class="modern-btn" id="integration-btn">Integration: 1.0s</button>
                    </div>
                    
                    <button class="modern-btn" id="atmosphere-btn">Atmosphere: On</button>
                    <button class="modern-btn start-btn" id="start-integration">‚ú® Begin Integration</button>
                    
                    <div class="progress-container">
                        <div class="progress-bar" id="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                    
                    <div class="output-panel" id="photometry-output"></div>
                </div>
            </div>

            <!-- Spectrometer Panel -->
            <div class="instrument-panel" id="spectrometer-section">
                <div class="panel-header">
                    <div class="panel-icon">üåà</div>
                    <div class="panel-title">Spectrometer</div>
                    <div class="status-indicator" style="margin-left: auto;">
                        <div class="status-dot inactive" id="spectrometer-status"></div>
                        <span>Ready</span>
                    </div>
                </div>
                
                <canvas class="instrument-canvas" id="spectrometer-canvas" width="360" height="200"></canvas>
                
                <div id="slit-status">No object in slit</div>
                
                <div class="spectrum-display" id="spectrum-plot">
                    <canvas id="spectrum-canvas" width="360" height="150"></canvas>
                </div>
                
                <div id="spectrum-status">Time: 0s  Total Counts: 0  Mean SNR: 0.00</div>
                
                <div class="spectrometer-controls">
                    <button class="modern-btn start-btn" id="start-spectrum">üöÄ Start Integration</button>
                    <button class="modern-btn abort-btn" id="stop-spectrum">‚èπÔ∏è Stop Integration</button>
                </div>
            </div>

            <!-- Catalog -->
            <div class="catalog-section">
                <div class="panel-header">
                    <div class="panel-icon">üìã</div>
                    <div class="panel-title">Object Catalog</div>
                </div>
                
                <table class="catalog-table" id="catalog-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>RA (h)</th>
                            <th>Dec (¬∞)</th>
                            <th>Mag</th>
                            <th>Type</th>
                        </tr>
                    </thead>
                    <tbody id="catalog-tbody">
                        <!-- Objects will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </aside>
    </div>
    
    <!-- Modal for Selections -->
    <div id="modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h3 id="modal-title">Select Option</h3>
            <div id="modal-body"></div>
            <div class="modal-buttons">
                <button id="modal-ok" class="btn-primary">OK</button>
                <button id="modal-cancel" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Keep all your existing JavaScript files -->
    <script src="js/constants.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/catalog.js"></script>
    <script src="js/telescope.js"></script>
    <script src="js/photometer.js"></script>
    <script src="js/spectrometer.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
